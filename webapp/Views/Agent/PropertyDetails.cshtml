@model PropertyDetailsViewModel

@using System;
@using System.Security.Cryptography;
@using System.Text;

@{
	ViewData["Title"] = "PropertyDetails";

	var property = Model.Property;
	var propertyIdString = property.Id.ToString(); // Ensure this is a string
	string ToSHA256String(string input)
	{
		var inputBytes = Encoding.UTF8.GetBytes(input);
		var inputHash = SHA256.HashData(inputBytes);
		return Convert.ToHexString(inputHash);
	}

	var property_folder = ToSHA256String(property.Id.ToString());
	Console.WriteLine("Directory: " + property_folder.ToLower());
	foreach (var feature in Model.SelectedFeatures)
	{
		Console.WriteLine("Selected Feature: " + feature);
	}
	var galleryPaths = Model.Property.GalleryPath?.Where(path => !string.IsNullOrWhiteSpace(path)).ToList() ?? new List<string>();
	decimal propertyPrice = property.Price;
	decimal downPayment = propertyPrice * (decimal)0.1;

	var property_js = Newtonsoft.Json.JsonConvert.SerializeObject(property);
	decimal? previousPrice = null; // Nullable to handle the first iteration where there is no previous price
	var update_lenght = 0;
}

<!-- ============================ Hero Banner  Start================================== -->
<style>
	#map {
		height: 400px;
	}
</style>

<div class="featured_slick_gallery gray m-0">
	<div class="featured_slick_gallery-slide">
		@if (Model.Property.GalleryPath.All(string.IsNullOrWhiteSpace))
		{
			<div class="featured_slick_padd">
				<a href="~/uploads/property/default/default_property.jpeg" class="mfp-gallery">
					<img src="~/uploads/property/default/default_property.jpeg" class="img-fluid mx-auto" alt="">
				</a>
			</div>
		}
		else
		{
			Console.WriteLine("Got photo");
			Console.WriteLine(Model.Property.GalleryPath.First());
			@foreach (var galleryPath in property.GalleryPath)
			{
				<div class="featured_slick_padd"><a href="~/uploads/property/@(property_folder.ToLower())/@(galleryPath)" class="mfp-gallery"><img src="~/uploads/property/@(property_folder.ToLower())/@(galleryPath)" class="img-fluid mx-auto" alt=""></a></div>
			}
		}
	</div>
</div>
<!-- ============================ Hero Banner End ================================== -->
<!-- ============================ Property Detail Start ================================== -->
			<section>
				<div class="container">
					<div class="row">
						
						<!-- property main detail -->
						<div class="col-lg-8 col-md-12 col-sm-12">
							
							<!-- Main Info Detail -->
							<div class="vesh-detail-bloc style_2 px-0">
								<div class="vesh-detail-headup px-0 pt-0">
									<div class="vesh-detail-headup-first">
										<div class="prt-detail-title-desc">
											<span class="label label-success">For Sale</span>
											<h4>@property.Title</h4>
											<span class="text-mid">
												<i class="fa-solid fa-location-dot me-2"></i>
													@property.AddressLine
													,
													@property.City
													,
													@property.State
													,
													@property.ZipCode
											</span>
											<div class="list-fx-features mt-2">
												<div class="list-fx-fisrt">
													<span class="label font--medium label-light-success me-2">@property.Bedrooms Beds</span>
													<span class="label font--medium label-light-info me-2">@property.Bathrooms Bath</span>
													<span class=" label font--medium label-light-danger">@property.Area Sqft</span>
												</div>
												<div class="list-fx-last">
												
												</div>
											</div>
										</div>
									</div>
									<div class="vesh-detail-headup-last">
										<h3 class="prt-price-fix theme-cl">@property.Price.ToString("C")<span>One Time</span></h3>
									</div>
								</div>
							</div>
							
							<!-- About Property Detail -->
							<div class="vesh-detail-bloc style_2">
								<div class="vesh-detail-bloc_header">
									<h4 class="property_block_title no-arrow">About Property</h4>
								</div>
								<div class="vesh-detail-bloc-body">
									<div class="row g-3">
										<div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12">
											<p>@property.Description</p>
										</div>
									</div>
								</div>
							</div>
							
							<!-- Basic Detail -->
							<div class="vesh-detail-bloc style_2">
								<div class="vesh-detail-bloc_header">
									<a data-bs-toggle="collapse" data-parent="#basicinfo" data-bs-target="#basicinfo" aria-controls="basicinfo" href="javascript:void(0);" aria-expanded="false"><h4 class="property_block_title">Basic Detail</h4></a>
								</div>
								<div id="basicinfo" class="panel-collapse collapse" aria-labelledby="basicinfo">
									<div class="vesh-detail-bloc-body">
										<div class="row g-3">
											<div class="col-xl-3 col-lg-3 col-md-3 col-sm-4 col-6"><div class="ilio-icon-wrap"><div class="ilio-icon"><i class="fa-solid fa-bed"></i></div><div class="ilio-text">@property.Bedrooms Bedrooms</div></div></div>
											<div class="col-xl-3 col-lg-3 col-md-3 col-sm-4 col-6"><div class="ilio-icon-wrap"><div class="ilio-icon"><i class="fa-solid fa-bath"></i></div><div class="ilio-text">@property.Bathrooms Bathrooms</div></div></div>
											<div class="col-xl-3 col-lg-3 col-md-3 col-sm-4 col-6"><div class="ilio-icon-wrap"><div class="ilio-icon"><i class="fa-solid fa-layer-group"></i></div><div class="ilio-text">@property.Area sq ft</div></div></div>
								<div class="col-xl-3 col-lg-3 col-md-3 col-sm-4 col-6"><div class="ilio-icon-wrap"><div class="ilio-icon"><i class="fa-solid fa-building-wheat"></i></div><div class="ilio-text">@(!string.IsNullOrEmpty(property.BuildingAge) ? property.BuildingAge : "Building Age Not Provided")</div></div></div>
											<div class="col-xl-3 col-lg-3 col-md-3 col-sm-4 col-6"><div class="ilio-icon-wrap"><div class="ilio-icon"><i class="fa-solid fa-location-dot"></i></div><div class="ilio-text">@property.City</div></div></div>
											<div class="col-xl-3 col-lg-3 col-md-3 col-sm-4 col-6"><div class="ilio-icon-wrap"><div class="ilio-icon"><i class="fa-solid fa-building"></i></div><div class="ilio-text">@property.PropertyType</div></div></div>
										</div>
									</div>
								</div>
							</div>
							
							<!-- Amenties Detail -->
							@* <div class="vesh-detail-bloc style_2">
								<div class="vesh-detail-bloc_header">
									<a data-bs-toggle="collapse" data-parent="#amenitiesinfo" data-bs-target="#amenitiesinfo" aria-controls="amenitiesinfo" href="javascript:void(0);" aria-expanded="false"><h4 class="property_block_title">Amenties</h4></a>
								</div>
								<div id="amenitiesinfo" class="panel-collapse collapse" aria-labelledby="amenitiesinfo">
									<div class="vesh-detail-bloc-body">
									@if (!string.IsNullOrEmpty(property.Detail.OtherFeatures)) {
										<ul class="avl-features third color">
											@foreach (var feature in property.Detail.OtherFeatures.Split(";"))
											{
												<li>@feature</li>
											}
										</ul>
										} else
										{
											<p>No extra Amenties</p>
										}
									</div>
								</div>
							</div> *@
							
							
							<!-- All features Detail -->

							<div class="vesh-detail-bloc style_2">
								<div class="vesh-detail-bloc_header">
									<a data-bs-toggle="collapse" data-parent="#featuresinfo" data-bs-target="#featuresinfo" aria-controls="featuresinfo" href="javascript:void(0);" aria-expanded="false"><h4 class="property_block_title">Features</h4></a>
								</div>
								<div id="featuresinfo" class="panel-collapse collapse" aria-labelledby="featuresinfo">
									<div class="vesh-detail-bloc-body">
										@foreach (var category in Model.Features
												.Where(f => Model.SelectedFeatures.Contains(f.FeatureID.ToString()))
												.GroupBy(f => f.Category)
												.ToList())
										{
											<div class="lvs-detail mb-4">
												<div class="row">
													<div class="col-xl-12 col-lg-12 col-md-12"><h6>@category.Key</h6></div>
												</div>
												<div class="row gy-3">
													@foreach (var feature in category)
													{
														<div class="col-xl-4 col-lg-4 col-md-4 col-12">
															<div class="lvs-caption"><i class="fa-solid @feature.IconClass"></i>@feature.FeatureName</div>
														</div>
													}
												</div>
											</div>
										}
										@* <div class="lvs-detail mb-4">
											<div class="row">
												<div class="col-xl-12 col-lg-12 col-md-12"><h6>Interior Details</h6></div>
											</div>
											<div class="row gy-3">
												<div class="col-xl-4 col-lg-4 col-md-4 col-12"><div class="lvs-caption"><i class="fa-solid fa-utensils"></i>Equipped Kitchen</div></div>
												<div class="col-xl-4 col-lg-4 col-md-4 col-12"><div class="lvs-caption"><i class="fa-solid fa-dumbbell"></i>Gym</div></div>
												<div class="col-xl-4 col-lg-4 col-md-4 col-12"><div class="lvs-caption"><i class="fa-solid fa-jug-detergent"></i>Laundry</div></div>
												<div class="col-xl-4 col-lg-4 col-md-4 col-12"><div class="lvs-caption"><i class="fa-brands fa-chromecast"></i>Media Room</div></div>
												<div class="col-xl-4 col-lg-4 col-md-4 col-12"><div class="lvs-caption"><i class="fa-solid fa-tv"></i>TV Set</div></div>
											</div>
										</div>
										<div class="lvs-detail mb-4">
											<div class="row">
												<div class="col-xl-12 col-lg-12 col-md-12"><h6>Outdoor Details</h6></div>
											</div>
											<div class="row gy-3">
												<div class="col-xl-4 col-lg-4 col-md-4 col-12"><div class="lvs-caption"><i class="fa-brands fa-canadian-maple-leaf"></i>Back yard</div></div>
												<div class="col-xl-4 col-lg-4 col-md-4 col-12"><div class="lvs-caption"><i class="fa-solid fa-basketball"></i>Basketball court</div></div>
												<div class="col-xl-4 col-lg-4 col-md-4 col-12"><div class="lvs-caption"><i class="fa-solid fa-seedling"></i>Front yard</div></div>
												<div class="col-xl-4 col-lg-4 col-md-4 col-12"><div class="lvs-caption"><i class="fa-solid fa-square-parking"></i>Garage Attached</div></div>
												<div class="col-xl-4 col-lg-4 col-md-4 col-12"><div class="lvs-caption"><i class="fa-solid fa-shower"></i>Hot Bath</div></div>
												<div class="col-xl-4 col-lg-4 col-md-4 col-12"><div class="lvs-caption"><i class="fa-solid fa-water-ladder"></i>Pool</div></div>
											</div>
										</div>
										<div class="lvs-detail mb-4">
											<div class="row">
												<div class="col-xl-12 col-lg-12 col-md-12"><h6>Utilities</h6></div>
											</div>
											<div class="row gy-3">
												<div class="col-xl-4 col-lg-4 col-md-4 col-12"><div class="lvs-caption"><i class="fa-solid fa-fan"></i>Central Air</div></div>
												<div class="col-xl-4 col-lg-4 col-md-4 col-12"><div class="lvs-caption"><i class="fa-solid fa-plug"></i>Electricity</div></div>
												<div class="col-xl-4 col-lg-4 col-md-4 col-12"><div class="lvs-caption"><i class="fa-solid fa-fire"></i>Heating</div></div>
												<div class="col-xl-4 col-lg-4 col-md-4 col-12"><div class="lvs-caption"><i class="fa-solid fa-fire-flame-simple"></i>Natural Gas</div></div>
												<div class="col-xl-4 col-lg-4 col-md-4 col-12"><div class="lvs-caption"><i class="fa-solid fa-snowflake"></i>Ventilation</div></div>
												<div class="col-xl-4 col-lg-4 col-md-4 col-12"><div class="lvs-caption"><i class="fa-solid fa-droplet"></i>Water</div></div>
											</div>
										</div>
										<div class="lvs-detail">
											<div class="row">
												<div class="col-xl-12 col-lg-12 col-md-12"><h6>Other Features</h6></div>
											</div>
											<div class="row gy-3">
												<div class="col-xl-4 col-lg-4 col-md-4 col-12"><div class="lvs-caption"><i class="fa-solid fa-wheelchair"></i>Chair Accessible</div></div>
												<div class="col-xl-4 col-lg-4 col-md-4 col-12"><div class="lvs-caption"><i class="fa-solid fa-elevator"></i>Elevator</div></div>
												<div class="col-xl-4 col-lg-4 col-md-4 col-12"><div class="lvs-caption"><i class="fa-solid fa-fire-extinguisher"></i>Fireplace</div></div>
												<div class="col-xl-4 col-lg-4 col-md-4 col-12"><div class="lvs-caption"><i class="fa-solid fa-smoking"></i>Smoke detectors</div></div>
												<div class="col-xl-4 col-lg-4 col-md-4 col-12"><div class="lvs-caption"><i class="fa-solid fa-bacon"></i>Washer and dryer</div></div>
												<div class="col-xl-4 col-lg-4 col-md-4 col-12"><div class="lvs-caption"><i class="fa-solid fa-wifi"></i>WiFi</div></div>
											</div>
										</div> *@
									</div>
								</div>
							</div>							
							
							@* <!-- Floor Plan -->
							<div class="vesh-detail-bloc style_2">
								<div class="vesh-detail-bloc_header">
									<a data-bs-toggle="collapse" data-parent="#floorinfo" data-bs-target="#floorinfo" aria-controls="floorinfo" href="javascript:void(0);" aria-expanded="false"><h4 class="property_block_title">Floor Plan</h4></a>
								</div>
								<div id="floorinfo" class="panel-collapse collapse" aria-labelledby="floorinfo">
									<div class="vesh-detail-bloc-body">
										<ul class="nav nav-pills mb-3" id="pills-tab" role="tablist">
											<li class="nav-item" role="presentation">
											<button class="nav-link active" id="pills-2d-tab" data-bs-toggle="pill" data-bs-target="#pills-2d" type="button" role="tab" aria-controls="pills-2d" aria-selected="true">2D Plans</button>
											</li>
											<li class="nav-item" role="presentation">
											<button class="nav-link" id="pills-3d-tab" data-bs-toggle="pill" data-bs-target="#pills-3d" type="button" role="tab" aria-controls="pills-3d" aria-selected="false">3D Plans</button>
											</li>
											<li class="nav-item" role="presentation">
											<button class="nav-link" id="pills-elevation-tab" data-bs-toggle="pill" data-bs-target="#pills-elevation" type="button" role="tab" aria-controls="pills-elevation" aria-selected="false">Elevations</button>
											</li>
										</ul>
										<div class="tab-content" id="pills-tabContent">
											<div class="tab-pane fade show active" id="pills-2d" role="tabpanel" aria-labelledby="pills-2d-tab" tabindex="0">
												<div class="row gx-3 gy-4">
													<div class="col-xl-4 col-lg-4 col-md-4">
														<div class="floor-thumb"><img src="assets/img/fl-1.jpg" class="img-fluid" alt=""></div>
													</div>
													<div class="col-xl-4 col-lg-4 col-md-4">
														<div class="floor-thumb"><img src="assets/img/fl-2.jpg" class="img-fluid" alt=""></div>
													</div>
													<div class="col-xl-4 col-lg-4 col-md-4">
														<div class="floor-thumb"><img src="assets/img/fl-1.jpg" class="img-fluid" alt=""></div>
													</div>
												</div>
											</div>
											
											<div class="tab-pane fade" id="pills-3d" role="tabpanel" aria-labelledby="pills-3d-tab" tabindex="0">
												<div class="row gx-3 gy-4">
													<div class="col-xl-4 col-lg-4 col-md-4">
														<div class="floor-thumb"><img src="assets/img/fl-3.jpg" class="img-fluid" alt=""></div>
													</div>
													<div class="col-xl-4 col-lg-4 col-md-4">
														<div class="floor-thumb"><img src="assets/img/fl-4.jpg" class="img-fluid" alt=""></div>
													</div>
													<div class="col-xl-4 col-lg-4 col-md-4">
														<div class="floor-thumb"><img src="assets/img/fl-3.jpg" class="img-fluid" alt=""></div>
													</div>
												</div>
											</div>
											<div class="tab-pane fade" id="pills-elevation" role="tabpanel" aria-labelledby="pills-elevation-tab" tabindex="0">
												<div class="row gx-3 gy-4">
													<div class="col-xl-4 col-lg-4 col-md-4">
														<div class="floor-thumb"><img src="assets/img/fl-5.webp" class="img-fluid" alt=""></div>
													</div>
													<div class="col-xl-4 col-lg-4 col-md-4">
														<div class="floor-thumb"><img src="assets/img/fl-6.jpeg" class="img-fluid" alt=""></div>
													</div>
													<div class="col-xl-4 col-lg-4 col-md-4">
														<div class="floor-thumb"><img src="assets/img/fl-5.webp" class="img-fluid" alt=""></div>
													</div>
												</div>	
											</div>
										</div>
									</div>
								</div>
							</div> *@
							
							<!-- Property History -->
							<div class="vesh-detail-bloc style_2">
								<div class="vesh-detail-bloc_header">
									<a data-bs-toggle="collapse" data-parent="#historyinfo" data-bs-target="#historyinfo" aria-controls="historyinfo" href="javascript:void(0);" aria-expanded="false"><h4 class="property_block_title">Property Price History</h4></a>
								</div>
								<div id="historyinfo" class="panel-collapse collapse show" aria-labelledby="historyinfo">
									<div class="vesh-detail-bloc-body">
										<ul class="nav nav-pills mb-3" id="pills-tab1" role="tablist">
											<li class="nav-item" role="presentation">
											<button class="nav-link active" id="pills-price-tab" data-bs-toggle="pill" data-bs-target="#pills-sales-price" type="button" role="tab" aria-controls="pills-price" aria-selected="true">For Sales</button>
											</li>
											<li class="nav-item" role="presentation">
											<button class="nav-link" id="pills-tax-tab" data-bs-toggle="pill" data-bs-target="#pills-rent-price" type="button" role="tab" aria-controls="pills-tax" aria-selected="false">For Rent</button>
											</li>
										</ul>
										<div class="tab-content" id="pills-tabContent1">
											<div class="tab-pane fade show active" id="pills-sales-price" role="tabpanel" aria-labelledby="pills-price-tab" tabindex="0">
												<div class="table-responsive">
													<table class="table">
														<thead>
															<tr>
																<th scope="col">Date</th>
																<th scope="col">Event</th>
																<th scope="col">Price</th>
																<th scope="col">Change</th>
																<th scope="col">Sq Ft Price</th>
															</tr>
														</thead>
														<tbody>
															@{
																var salesUpdates = Model.PropertyUpdates.Where(u => u.Status == "Sale").OrderByDescending(u => u.UpdateDate).ToList();

																update_lenght = salesUpdates.Count();
																for (int i = 0;i < update_lenght; i++)
																{
																	Console.WriteLine(Model.PropertyUpdates.Count());
																	Console.WriteLine("Index:  " + i);
																	Console.WriteLine("Index + 1:  " + (i + 1));
																	var update = salesUpdates[i];
																	decimal previous_price_sale = 0; // invalid number to indicate no changes
																	if (i + 1 < update_lenght)
																	{
																		Console.WriteLine("Inside");
																		previous_price_sale = salesUpdates[(1 + i)].Price;										
																	}
																	<tr>
																		<td>@update.UpdateDate.ToString("dd MMM yyyy")</td>
																		<td>@update.Status</td>
																		<td>@String.Format("{0:C}", update.Price)</td>
																		<td>@((update.Price - previous_price_sale) != 0 ? String.Format("{0:C}", update.Price - previous_price_sale) : "N/A")</td>
																		<td>@Math.Round(update.Price / decimal.Parse(property.Area), 2).ToString("C") / Sqft</td>
																	</tr>
																}
															}
@* 															<tr>
																<td>10 Jan 2020</td>
																<td>For Sale</td>
																<td>$40700</td>
																<td>Nill</td>
																<td>$910/Sqft</td>
															</tr>
															<tr>
																<td>07 Feb 2020</td>
																<td>For Sale</td>
																<td>$65000</td>
																<td>Nill</td>
																<td>$1650/Sqft</td>
															</tr>
															<tr>
																<td>10 Apr 2020</td>
																<td>For Rent</td>
																<td>$55200</td>
																<td>Nill</td>
																<td>$780/Sqft</td>
															</tr>
															<tr>
																<td>17 Jan 2021</td>
																<td>For Sale</td>
																<td>$70800</td>
																<td>Nill</td>
																<td>$1050/Sqft</td>
															</tr>
															<tr>
																<td>20 Aug 2022</td>
																<td>For Sale</td>
																<td>$80500</td>
																<td>Nill</td>
																<td>$890/Sqft</td>
															</tr>
															<tr>
																<td>15 Dec 2022</td>
																<td>For Rent</td>
																<td>$58000</td>
																<td>Nill</td>
																<td>$850/Sqft</td>
															</tr>
															<tr>
																<td colspan="5"><span class="font--medium text-success">Source: My State MLS</span></td>
															</tr> *@
															<tr>
																<td colspan="5"><span class="font--medium text-success">Source: DDAC Property Database</span></td>
															</tr>
														</tbody>
													</table>
												</div>
											</div>
											
											<div class="tab-pane fade" id="pills-rent-price" role="tabpanel" aria-labelledby="pills-tax-tab" tabindex="0">
												<div class="table-responsive">
													<table class="table">
														<thead>
															<tr>
																<th scope="col">Date</th>
																<th scope="col">Event</th>
																<th scope="col">Price</th>
																<th scope="col">Change</th>
																<th scope="col">Sq Ft Price</th>
															</tr>
														</thead>
														<tbody>
															@{
																var rentUpdates = Model.PropertyUpdates.Where(u => u.Status == "Rent").OrderByDescending(u => u.UpdateDate).ToList();
																Console.WriteLine("Debug");
																update_lenght = rentUpdates.Count();
																Console.WriteLine("Lenght: " + update_lenght);
																for (int i = 0; i < update_lenght; i++)
																{
																	Console.WriteLine(Model.PropertyUpdates.Count());
																	Console.WriteLine("Index:  " + i);
																	Console.WriteLine("Index + 1:  " + (i + 1));
																	var update = rentUpdates[i];
																	decimal previous_price_rent = 0; // invalid number to indicate no changes
																	if (i + 1 < update_lenght)
																	{
																		Console.WriteLine("Inside");
																		previous_price_rent = rentUpdates[(i + 1)].Price;
																	}
																	<tr>
																		<td>@update.UpdateDate.ToString("dd MMM yyyy")</td>
																		<td>@update.Status</td>
																		<td>@String.Format("{0:C}", update.Price)</td>
																		<td>@((update.Price - previous_price_rent) != 0 ? String.Format("{0:C}", update.Price - previous_price_rent) : "N/A")</td>
																		<td>@Math.Round(update.Price / decimal.Parse(property.Area), 2).ToString("C") / Sqft</td>
																	</tr>
																}
															}
															@* <tr>
																<td>2017</td>
																<td>$1700</td>
																<td>$40700</td>
																<td>$76,400</td>
																<td>$0</td>
															</tr>
															<tr>
																<td>2018</td>
																<td>$1250</td>
																<td>$65000</td>
																<td>$75,600</td>
																<td>$0</td>
															</tr>
															<tr>
																<td>2019</td>
																<td>$1360</td>
																<td>$55200</td>
																<td>$58,700</td>
																<td>$0</td>
															</tr>
															<tr>
																<td>2020</td>
																<td>$1890</td>
																<td>$70800</td>
																<td>$80600</td>
																<td>$0</td>
															</tr>
															<tr>
																<td>2021</td>
																<td>$1620</td>
																<td>$80500</td>
																<td>$70,500</td>
																<td>$0</td>
															</tr>
															<tr>
																<td>2022</td>
																<td>$1460</td>
																<td>$58000</td>
																<td>$86,800</td>
																<td>$0</td>
															</tr> *@
															<tr>
																<td colspan="5"><span class="font--medium text-success">Source: DDAC Property Database</span></td>
															</tr>
														</tbody>
													</table>
												</div>
											</div>
										</div>
									</div>
								</div>
							</div>
							
							
							@* <!-- All over Review -->
							<!-- <div class="veshm-fl-rate-box">
								<div class="fl-rate-box-head theme-bg">
									<div class="flt-yuo10">
										<h4>5.0</h4>
										<p>Excellent</p>
									</div>
									<div class="flt-yuo12">
										<span>Out of 5</span>
									</div>
								</div>
								<div class="fl-rate-box-caption">
									<div class="fls-by1">
										<div class="fls-by2">
											<div class="fls-bystar">
												<span class="fas fa-star fill"></span>
												<span class="fas fa-star fill"></span>
												<span class="fas fa-star fill"></span>
												<span class="fas fa-star fill"></span>
												<span class="fas fa-star fill"></span>
											</div>
											<div class="fls-byheadline">
												<h5>Wonderful Score</h5>
											</div>
											<div class="fls-bycaps">
												<p>112 Total Reviews</p>
											</div>
										</div>
										<div class="fls-by3">
											<button type="button" class="btn btn-success font--medium">Submit Review</button>
										</div>
									</div>
								</div>
							</div>
							All over Review --> *@
							
							@* <!-- Property Reviews Detail -->
							<div class="vesh-detail-bloc style_2">
								<div class="vesh-detail-bloc_header">
									<h4 class="property_block_title no-arrow">Property Reviews</h4>
								</div>
								<div class="panels">
									<div class="vesh-detail-bloc-body">
										<div class="prt-reviews-groups">
										
											<div class="prt-reviews-single">
												<div class="prt-reviews-single-thumb">
													<div class="prt-rvs-head">
														<div class="prt-rvs-head-img">
															<img src="https://via.placeholder.com/650x650" class="img-fluid circle" alt="">
														</div>
														<div class="prt-rvs-head-caption">
															<div class="prt-ves-ratting">
																<span class="fa-solid fa-star"></span>
																<span class="fa-solid fa-star"></span>
																<span class="fa-solid fa-star"></span>
																<span class="fa-solid fa-star"></span>
																<span class="fa-regular fa-star"></span>
															</div>
															<div class="prt-ves-reviewer"><h4>By: Shuryabhan Singh</h4></div>
															<div class="prt-ves-ratting-title"><h5 class="text-success">Superb</h5></div>
														</div>
													</div>
												</div>
												<div class="prt-reviews-single-content">
													<div class="prt-ves-paragraph">
														<p>Overall a wonderful building. The apartments are great. The reviews are second to none. I find the staff largely very friendly and helpful. The amenity space is clean and well appointed. The gym is convenient. The neighborhood is hard to be. Very pet friendly. I’ve been here for 2 1/2 years and really have had zero complaints.</p>
													</div>
													<div class="prt-post-date"><span>Posted on 10 Jan 2023</span></div>
												</div>
											</div>
											
											<div class="prt-reviews-single">
												<div class="prt-reviews-single-thumb">
													<div class="prt-rvs-head">
														<div class="prt-rvs-head-img">
															<img src="https://via.placeholder.com/650x650" class="img-fluid circle" alt="">
														</div>
														<div class="prt-rvs-head-caption">
															<div class="prt-ves-ratting">
																<span class="fa-solid fa-star"></span>
																<span class="fa-solid fa-star"></span>
																<span class="fa-solid fa-star"></span>
																<span class="fa-solid fa-star"></span>
																<span class="fa-regular fa-star"></span>
															</div>
															<div class="prt-ves-reviewer"><h4>By: Maithali Gupta</h4></div>
															<div class="prt-ves-ratting-title"><h5 class="text-warning">Middle</h5></div>
														</div>
													</div>
												</div>
												<div class="prt-reviews-single-content">
													<div class="prt-ves-paragraph">
														<p>Overall a wonderful building. The apartments are great. The reviews are second to none. I find the staff largely very friendly and helpful. The amenity space is clean and well appointed. The gym is convenient. The neighborhood is hard to be. Very pet friendly. I’ve been here for 2 1/2 years and really have had zero complaints.</p>
													</div>
													<div class="prt-post-date"><span>Posted on 18 Jan 2023</span></div>
												</div>
											</div>
											
											<div class="prt-reviews-single">
												<div class="prt-reviews-single-thumb">
													<div class="prt-rvs-head">
														<div class="prt-rvs-head-img">
															<img src="https://via.placeholder.com/650x650" class="img-fluid circle" alt="">
														</div>
														<div class="prt-rvs-head-caption">
															<div class="prt-ves-ratting">
																<span class="fa-solid fa-star"></span>
																<span class="fa-solid fa-star"></span>
																<span class="fa-solid fa-star"></span>
																<span class="fa-solid fa-star"></span>
																<span class="fa-regular fa-star"></span>
															</div>
															<div class="prt-ves-reviewer"><h4>By: Rajvanshi Patel</h4></div>
															<div class="prt-ves-ratting-title"><h5 class="text-success">Superb</h5></div>
														</div>
													</div>
												</div>
												<div class="prt-reviews-single-content">
													<div class="prt-ves-paragraph">
														<p>Overall a wonderful building. The apartments are great. The reviews are second to none. I find the staff largely very friendly and helpful. The amenity space is clean and well appointed. The gym is convenient. The neighborhood is hard to be. Very pet friendly. I’ve been here for 2 1/2 years and really have had zero complaints.</p>
													</div>
													<div class="prt-post-date"><span>Posted on 20 Jan 2023</span></div>
												</div>
											</div>
										
										</div>
										<div class="alert alert-info mt-3" role="alert">
											<span class="font--medium small">You need to login in order to post a review</span>
										</div>
									</div>
								</div>
							</div> *@
							
							<!-- Nearby School -->
							<div class="vesh-detail-bloc style_2">
								<div class="vesh-detail-bloc_header">
									<a data-bs-toggle="collapse" data-parent="#schoolsinfo" data-bs-target="#schoolsinfo" aria-controls="schoolsinfo" href="javascript:void(0);" aria-expanded="false"><h4 class="property_block_title">Map</h4></a>
								</div>
								<div id="schoolsinfo" class="panel-collapse collapse" aria-labelledby="schoolsinfo">
									<div id="map"></div>
									<script>
										var property_js = @Html.Raw(property_js);

										let map;
										let geocoder;
										// The callback function that initializes the map
										function initMap() {
											map = new google.maps.Map(document.getElementById('map'), {
												center: { lat: 3.056069, lng: 101.700466 },
												zoom: 15,
												mapId: "DEMO_MAP_ID", // Map ID is required for advanced markers.
											});
											geocoder = new google.maps.Geocoder();

											// const address = 'Jalan Teknologi 5, MRANTI Park, 57000, Kuala Lumpur, Malaysia';
											const address = `${property_js.AddressLine}, ${property_js.City}, ${property_js.ZipCode}, ${property_js.State}, Malaysia`;
											console.log("Address before search" + address);
											searchAddress(address);
										}

										function searchAddress(address) {
											console.log("Geocoding address:", address);
											// const address = document.getElementById('searchInput').value;
											geocoder.geocode({ 'address': address }, function (results, status) {
												if (status === 'OK') {
													const location = results[0].geometry.location;
													map.setCenter(location);
													new google.maps.marker.AdvancedMarkerElement({
														map: map,
														position: location
													});
												} else {
													alert('Geocode was not successful for the following reason: ' + status);
												}
											});
							}
									</script>
									<!-- Load the Google Maps API asynchronously and defer execution -->
						<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDmbu1JIMzxCG5-0SptuDVnXQw2R3GFBTI&libraries=marker&loading=async&callback=initMap" async defer></script>
					</div>



								@* <div id="schoolsinfo" class="panel-collapse collapse" aria-labelledby="schoolsinfo">
									<div class="vesh-detail-bloc-body">
										<div class="nerb-lists-groups">
										
											<div class="nerb-lists-single">
												<div class="nerb-lists-sgl-first">
													<div class="nerb-lists-sgl-head"><h5>9/10</h5></div>
													<div class="nerb-lists-sgl-caption">
														<div class="nerb-school-name">Myakka River Elementary School</div>
														<div class="nerb-school-subtext"><span>Public</span>, <span>PreK-5</span>, <span>Serves this home</span></div>														
													</div>
												</div>
												<div class="nerb-lists-sgl-last">
													<div class="nerb-lists-sgl-01">
														<div class="nerb-section-number">540</div>
														<div class="nerb-section-title"><span>Students</span></div>
													</div>
													<div class="nerb-lists-sgl-02">
														<div class="nerb-section-number">2.7 mi</div>
														<div class="nerb-section-title"><span>Distance</span></div>
													</div>
													<div class="nerb-lists-sgl-03">
														<div class="nerb-section-number">
															<div class="prt-ves-ratting">
																<span class="fa-solid fa-star"></span>
																<span class="fa-solid fa-star"></span>
																<span class="fa-solid fa-star"></span>
																<span class="fa-solid fa-star"></span>
																<span class="fa-regular fa-star"></span>
															</div>
														</div>
														<div class="nerb-section-title"><span>24 Reviews</span></div>
													</div>
												</div>
											</div>
											
											<div class="nerb-lists-single">
												<div class="nerb-lists-sgl-first">
													<div class="nerb-lists-sgl-head"><h5>7/10</h5></div>
													<div class="nerb-lists-sgl-caption">
														<div class="nerb-school-name">Rose Wood Inter Collage</div>
														<div class="nerb-school-subtext"><span>Public</span>, <span>PreK-5</span>, <span>Serves this home</span></div>														
													</div>
												</div>
												<div class="nerb-lists-sgl-last">
													<div class="nerb-lists-sgl-01">
														<div class="nerb-section-number">890</div>
														<div class="nerb-section-title"><span>Students</span></div>
													</div>
													<div class="nerb-lists-sgl-02">
														<div class="nerb-section-number">2.9 mi</div>
														<div class="nerb-section-title"><span>Distance</span></div>
													</div>
													<div class="nerb-lists-sgl-03">
														<div class="nerb-section-number">
															<div class="prt-ves-ratting">
																<span class="fa-solid fa-star"></span>
																<span class="fa-solid fa-star"></span>
																<span class="fa-solid fa-star"></span>
																<span class="fa-solid fa-star"></span>
																<span class="fa-regular fa-star"></span>
															</div>
														</div>
														<div class="nerb-section-title"><span>32 Reviews</span></div>
													</div>
												</div>
											</div>
											
											<div class="nerb-lists-single">
												<div class="nerb-lists-sgl-first">
													<div class="nerb-lists-sgl-head"><h5>8/10</h5></div>
													<div class="nerb-lists-sgl-caption">
														<div class="nerb-school-name">Bharat Green Velly School</div>
														<div class="nerb-school-subtext"><span>Public</span>, <span>PreK-5</span>, <span>Serves this home</span></div>														
													</div>
												</div>
												<div class="nerb-lists-sgl-last">
													<div class="nerb-lists-sgl-01">
														<div class="nerb-section-number">670</div>
														<div class="nerb-section-title"><span>Students</span></div>
													</div>
													<div class="nerb-lists-sgl-02">
														<div class="nerb-section-number">3.2 mi</div>
														<div class="nerb-section-title"><span>Distance</span></div>
													</div>
													<div class="nerb-lists-sgl-03">
														<div class="nerb-section-number">
															<div class="prt-ves-ratting">
																<span class="fa-solid fa-star"></span>
																<span class="fa-solid fa-star"></span>
																<span class="fa-solid fa-star"></span>
																<span class="fa-solid fa-star"></span>
																<span class="fa-regular fa-star"></span>
															</div>
														</div>
														<div class="nerb-section-title"><span>24 Reviews</span></div>
													</div>
												</div>
											</div>
										
										</div>
									</div>
								</div> *@
							</div>
							
							<!-- Contact More Agents -->
							<div class="vesh-detail-bloc style_2">
								<div class="vesh-detail-bloc_header">
									<a data-bs-toggle="collapse" data-parent="#ctagent" data-bs-target="#ctagent" aria-controls="ctagent" href="javascript:void(0);" aria-expanded="false"><h4 class="property_block_title">Contact Other Agents</h4></a>
								</div>
								<div id="ctagent" class="panel-collapse collapse" aria-labelledby="ctagent">
									<div class="vesh-detail-bloc-body">
										<div class="row gx-3 gy-4">
										
											<!-- Single Agents Start -->
											<div class="col-xl-4 col-lg-4 col-md-6 col-sm-12 col-12">
												<div class="veshm-agent-wrap">
													<button class="btn btn-like" type="button"><i class="fa-solid fa-heart-circle-check"></i></button>
													<div class="veshm-list-75"><span>12 Property</span></div>
													<div class="veshm-agent-thumb">
														<img src="https://via.placeholder.com/650x650" class="img-fluid circle" alt="">
													</div>
													<div class="veshm-agent-content">
														<h4 class="vesh-content-title">Hilda A. Sheppard</h4>
														<div class="vesh-aget-rates">
															<i class="fa-solid fa-star"></i>
															<i class="fa-solid fa-star"></i>
															<i class="fa-solid fa-star"></i>
															<i class="fa-solid fa-star"></i>
															<i class="fa-solid fa-star"></i>
															<span class="resy-98">142 Reviews</span>
														</div>
														<div class="vesh-contact">
															<a href="agent-detail.html" class="btn rounded btn-light-success full-width">Contact Agent</a>	
														</div>
													</div>
													<div class="veshm-agent-footer">
														<div class="rlhc-prt-location"><i class="fa-solid fa-location-dot me-1"></i>Liverpool</div>
														<div class="veshm-agent-social">
															<ul>
																<li><a href="JavaScript:Void(0);"><i class="fa-brands fa-facebook-f"></i></a></li>
																<li><a href="JavaScript:Void(0);"><i class="fa-brands fa-instagram"></i></a></li>
																<li><a href="JavaScript:Void(0);"><i class="fa-brands fa-linkedin-in"></i></a></li>
															</ul>
														</div>
													</div>
												</div>
											</div>
											<!-- Single Agents End -->								
											
											<!-- Single Agents Start -->
											<div class="col-xl-4 col-lg-4 col-md-6 col-sm-12 col-12">
												<div class="veshm-agent-wrap">
													<button class="btn btn-like" type="button"><i class="fa-solid fa-heart-circle-check"></i></button>
													<div class="veshm-list-75"><span>26 Property</span></div>
													<div class="veshm-agent-thumb">
														<img src="https://via.placeholder.com/650x650" class="img-fluid circle" alt="">
													</div>
													<div class="veshm-agent-content">
														<h4 class="vesh-content-title">Keith D. Espinoza</h4>
														<div class="vesh-aget-rates">
															<i class="fa-solid fa-star"></i>
															<i class="fa-solid fa-star"></i>
															<i class="fa-solid fa-star"></i>
															<i class="fa-solid fa-star"></i>
															<i class="fa-solid fa-star"></i>
															<span class="resy-98">140 Reviews</span>
														</div>
														<div class="vesh-contact">
															<a href="agent-detail.html" class="btn rounded btn-light-success full-width">Contact Agent</a>	
														</div>
													</div>
													<div class="veshm-agent-footer">
														<div class="rlhc-prt-location"><i class="fa-solid fa-location-dot me-1"></i>Liverpool</div>
														<div class="veshm-agent-social">
															<ul>
																<li><a href="JavaScript:Void(0);"><i class="fa-brands fa-facebook-f"></i></a></li>
																<li><a href="JavaScript:Void(0);"><i class="fa-brands fa-instagram"></i></a></li>
																<li><a href="JavaScript:Void(0);"><i class="fa-brands fa-linkedin-in"></i></a></li>
															</ul>
														</div>
													</div>
												</div>
											</div>
											<!-- Single Agents End -->
											
											<!-- Single Agents Start -->
											<div class="col-xl-4 col-lg-4 col-md-6 col-sm-12 col-12">
												<div class="veshm-agent-wrap">
													<button class="btn btn-like" type="button"><i class="fa-solid fa-heart-circle-check"></i></button>
													<div class="veshm-list-75"><span>82 Property</span></div>
													<div class="veshm-agent-thumb">
														<img src="https://via.placeholder.com/650x650" class="img-fluid circle" alt="">
													</div>
													<div class="veshm-agent-content">
														<h4 class="vesh-content-title">Olga K. Backus</h4>
														<div class="vesh-aget-rates">
															<i class="fa-solid fa-star"></i>
															<i class="fa-solid fa-star"></i>
															<i class="fa-solid fa-star"></i>
															<i class="fa-solid fa-star"></i>
															<i class="fa-solid fa-star"></i>
															<span class="resy-98">245 Reviews</span>
														</div>
														<div class="vesh-contact">
															<a href="agent-detail.html" class="btn rounded btn-light-success full-width">Contact Agent</a>	
														</div>
													</div>
													<div class="veshm-agent-footer">
														<div class="rlhc-prt-location"><i class="fa-solid fa-location-dot me-1"></i>Liverpool</div>
														<div class="veshm-agent-social">
															<ul>
																<li><a href="JavaScript:Void(0);"><i class="fa-brands fa-facebook-f"></i></a></li>
																<li><a href="JavaScript:Void(0);"><i class="fa-brands fa-instagram"></i></a></li>
																<li><a href="JavaScript:Void(0);"><i class="fa-brands fa-linkedin-in"></i></a></li>
															</ul>
														</div>
													</div>
												</div>
											</div>
											<!-- Single Agents End -->
										
										</div>
									</div>
								</div>
							</div>
							
							@* <!-- Property Graph Detail -->
							<div class="vesh-detail-bloc style_2">
								<div class="vesh-detail-bloc_header">
									<h4 class="property_block_title no-arrow">View property Graph</h4>
								</div>
								<div id="clOne" class="panel-collapse collapse show" aria-labelledby="clOne">
									<div class="vesh-detail-bloc-body">
										<ul class="list-inline text-center m-t-40">
											<li>
												<h5><i class="fa fa-circle me-1 text-warning"></i>Total Revenue</h5>
											</li>
											<li>
												<h5><i class="fa fa-circle me-1 text-danger"></i>Total Property</h5>
											</li>
											<li>
												<h5><i class="fa fa-circle me-1 text-success"></i>Total income</h5>
											</li>
										</ul>
										<div class="chart" id="line-chart" style="height:300px;"></div>
									</div>
								</div>
							</div> *@
							
							
							<!-- Repayments Mortgage Calculator -->
							<div class="vesh-detail-bloc style_2">
								<div class="vesh-detail-bloc_header">
									<h4 class="property_block_title no-arrow">Repayments Mortgage Calculator</h4>
								</div>
								<div class="panel">
									<div class="vesh-detail-bloc-body">
										<div class="row">
											<div class="col-8">
												<div class="row align-items-bottom">
													@* <div class="col-xl-4 col-lg-4 col-md-6 col-12 mb-3"> *@
													<div class="col mb-3">
														 <label class="form-label font--medium small">Property value</label>
														 <div class="input-group">
															<span class="input-group-text">$</span>
															<input type="text" id="property-value" class="form-control" value="@property.Price.ToString("N2")">
														</div>
														<span class="text-danger" id="property-value-error"></span>
													</div>
													<div class="col mb-3">
														 <label class="form-label font--medium small">Your Down Payment</label>
														 <div class="input-group">
															<span class="input-group-text">@@</span>
															<input type="text" id="down-payment" class="form-control" value="@((property.Price * (decimal)0.1).ToString("N2"))">
														</div>
														<span class="text-danger" id="down-payment-error"></span>
													</div>
													@* <div class="col-xl-4 col-lg-4 col-md-6 col-12">
														<div class="alert alert-warning small mb-3" role="alert">
														  Your Loan to value would be <strong>90%</strong> with a Down Payment of <strong>@((property.Price * (decimal)0.1).ToString("C"))</strong>
														</div>
													</div> *@
												</div>
										
												<div class="row align-items-bottom">
													<div class="col mb-3">
														 <label class="form-label font--medium small">Mortgage Terms Length</label>
														 <div class="input-group">
														  <input type="number" id="mortgage-term" class="form-control" value="20">
														  <span class="input-group-text">Yrs</span>
														</div>
														<span class="text-danger" id="mortgage-term-error"></span>
													</div>
		@* 											<div class="col-xl-4 col-lg-4 col-md-6 col-12">
														 <label class="form-label font--medium small">Fixed Term Length</label>
														 <div class="input-group mb-3">
														  <input type="number" class="form-control" placeholder="7" value="5">
														  <span class="input-group-text">Yrs</span>
														</div>
													</div> *@
													<div class="col mb-3">
														 <label class="form-label font--medium small">Mortgage Fees</label>
														 <div class="input-group">
														  <span class="input-group-text">@@</span>
														  <input id="mortgage-fee" type="text" class="form-control" value="1,250">
														</div>
														<span class="text-danger" id="mortgage-fee-error"></span>
													</div>
		@* 											<div class="col-xl-4 col-lg-4 col-md-6 col-12">
														<label class="form-label font--medium small">Add fee To Mortgage</label>
														<div class="input-group mb-3">
															<select class="form-control">
																<option value="1">Yes</option>
																<option value="2">No</option>
															</select>
														</div>
													</div> *@
												</div>
										
												<div class="row align-items-bottom">
													<div class="col mb-3">
														 <label class="form-label font--medium small">Standardised Base Rate (SBR)</label>
														 <div class="input-group">
														  <input type="text" id="base-interest-rate" class="form-control" value="1.7">
														  <span class="input-group-text">%</span>
														</div>
														<span class="text-danger" id="base-interest-rate-error"></span>
													</div>
													<div class="col mb-3">
														 <label class="form-label font--medium small">Loan Intrest Rate</label>
														 <div class="input-group">
														  <input type="text" id="loan-interest-rate" class="form-control" value="4.2">
														  <span class="input-group-text">%</span>
														</div>
														<span class="text-danger" id="loan-interest-rate-error"></span>
													</div>
												</div>
											</div>
											@* <div class="col-xl-4 col-lg-4 col-md-6 col-2"> *@
											<div class="col-4">
												@* <div class="alert alert-warning small mb-3" role="alert">
													Your Loan to value would be <strong>90%</strong> with a Down Payment of <strong>@((property.Price * (decimal)0.1).ToString("C"))</strong>
												</div> *@
												<canvas id="mortgageChart"></canvas>
											</div>
										</div>
										
										<div class="row align-items-end">
											<div class="col-xl-12 col-lg-12 col-12 mb-4">
												<p class="m-0 p-0 font--medium small">Borrowing <strong>$250,6800</strong> and repaying over 25 yers with a <strong>10 yesr fixed rates</strong>.</p>
											</div>
										</div>
										
										<div class="row align-items-bottom">
											<div class="col-xl-12 col-lg-12 col-12">
												<div class="mortgage-wrp-bloc">
													<div class="mortgage-wrp-bloc-single">
														<div class="mrtg-wrp-title">Monthly Payment</div>
														<div id="monthly-payment" class="mrtg-wrp-subtitle">$799.70</div>
													</div>
													<div class="mortgage-wrp-bloc-single">
														<div class="mrtg-wrp-title">Total Amount Financed</div>
														<div id="total-amount-financed" class="mrtg-wrp-subtitle">$12,56.4</div>
													</div>
													<div class="mortgage-wrp-bloc-single">
														<div class="mrtg-wrp-title">Total Interest Payable</div>
														<div id="total-interest-payable" class="mrtg-wrp-subtitle">4.2%</div>
													</div>
													<div class="mortgage-wrp-bloc-single">
														<div class="mrtg-wrp-title">Total Payable</div>
														<div id="total-payable" class="mrtg-wrp-subtitle">$72,890</div>
													</div>
												</div>
											</div>
										</div>
										
									</div>
								</div>
							</div>
							
							
							<!-- Nearby Other Places -->
							@* <div class="vesh-detail-bloc style_2">
								<div class="vesh-detail-bloc_header">
									<a data-bs-toggle="collapse" data-parent="#otherplaces" data-bs-target="#otherplaces" aria-controls="otherplaces" href="javascript:void(0);" aria-expanded="false" class="clps"><h4 class="property_block_title">Nearby Others Places</h4></a>
								</div>
								<div id="otherplaces" class="panel-collapse collapse" aria-labelledby="otherplaces">
									<div class="vesh-detail-bloc-body">
									
										<ul class="nav nav-pills mb-3 small spacing lights" id="pills-list" role="tablist">
											<li class="nav-item" role="presentation">
												<button class="nav-link active" id="pills-highlights-tab" data-bs-toggle="pill" data-bs-target="#pills-highlights" type="button" role="tab" aria-controls="pills-highlights" aria-selected="true">Highlights</button>
											</li>
											<li class="nav-item" role="presentation">
												<button class="nav-link" id="pills-grocery-tab" data-bs-toggle="pill" data-bs-target="#pills-grocery" type="button" role="tab" aria-controls="pills-grocery" aria-selected="false">Grocery</button>
											</li>
											<li class="nav-item" role="presentation">
												<button class="nav-link" id="pills-food-tab" data-bs-toggle="pill" data-bs-target="#pills-food" type="button" role="tab" aria-controls="pills-food" aria-selected="false">Food & drink</button>
											</li>
											<li class="nav-item" role="presentation">
												<button class="nav-link" id="pills-park-tab" data-bs-toggle="pill" data-bs-target="#pills-park" type="button" role="tab" aria-controls="pills-park" aria-selected="false">Parks</button>
											</li>
											<li class="nav-item" role="presentation">
												<button class="nav-link" id="pills-fuel-tab" data-bs-toggle="pill" data-bs-target="#pills-fuel" type="button" role="tab" aria-controls="pills-fuel" aria-selected="false">Fuel Pump</button>
											</li>
											<li class="nav-item" role="presentation">
												<button class="nav-link" id="pills-hospital-tab" data-bs-toggle="pill" data-bs-target="#pills-hospital" type="button" role="tab" aria-controls="pills-hospital" aria-selected="false">Hospitals</button>
											</li>
											<li class="nav-item" role="presentation">
												<button class="nav-link" id="pills-services-tab" data-bs-toggle="pill" data-bs-target="#pills-services" type="button" role="tab" aria-controls="pills-services" aria-selected="false">Services</button>
											</li>
											<li class="nav-item" role="presentation">
												<button class="nav-link" id="pills-shopping-tab" data-bs-toggle="pill" data-bs-target="#pills-shopping" type="button" role="tab" aria-controls="pills-shopping" aria-selected="false">Shoppings</button>
											</li>
										</ul>
										
										<div class="tab-content" id="pills-listContent">
											<div class="tab-pane fade show active" id="pills-highlights" role="tabpanel" aria-labelledby="pills-highlights-tab" tabindex="0">
												<div class="row g-4">
													<div class="col-xl-6 col-lg-6 col-md-6 col-12">
														<div class="othr-place-list">
															<div class="othr-place-list-icon"><i class="fa-solid fa-martini-glass"></i></div>
															<div class="othr-place-list-caption">
																<div class="othr-place-list-title"><h5>Green Wood Fast Food</h5></div>
																<div class="othr-place-list-subtitle"><span>3.47 Miles</span></div>
															</div>
														</div>
													</div>
													<div class="col-xl-6 col-lg-6 col-md-6 col-12">
														<div class="othr-place-list">
															<div class="othr-place-list-icon"><i class="fa-solid fa-basket-shopping"></i></div>
															<div class="othr-place-list-caption">
																<div class="othr-place-list-title"><h5>Zigar Smart Bazaar</h5></div>
																<div class="othr-place-list-subtitle"><span>1.50 Miles</span></div>
															</div>
														</div>
													</div>
													<div class="col-xl-6 col-lg-6 col-md-6 col-12">
														<div class="othr-place-list">
															<div class="othr-place-list-icon"><i class="fa-solid fa-cart-shopping"></i></div>
															<div class="othr-place-list-caption">
																<div class="othr-place-list-title"><h5>Relience Smart Bazar</h5></div>
																<div class="othr-place-list-subtitle"><span>2.47 Miles</span></div>
															</div>
														</div>
													</div>
													<div class="col-xl-6 col-lg-6 col-md-6 col-12">
														<div class="othr-place-list">
															<div class="othr-place-list-icon"><i class="fa-solid fa-bowl-food"></i></div>
															<div class="othr-place-list-caption">
																<div class="othr-place-list-title"><h5>Smart Pizza Hub</h5></div>
																<div class="othr-place-list-subtitle"><span>3.47 Miles</span></div>
															</div>
														</div>
													</div>
													<div class="col-xl-6 col-lg-6 col-md-6 col-12">
														<div class="othr-place-list">
															<div class="othr-place-list-icon"><i class="fa-solid fa-square-parking"></i></div>
															<div class="othr-place-list-caption">
																<div class="othr-place-list-title"><h5>Gandhi Park Smarak</h5></div>
																<div class="othr-place-list-subtitle"><span>3.47 Miles</span></div>
															</div>
														</div>
													</div>
													<div class="col-xl-6 col-lg-6 col-md-6 col-12">
														<div class="othr-place-list">
															<div class="othr-place-list-icon"><i class="fa-solid fa-suitcase-medical"></i></div>
															<div class="othr-place-list-caption">
																<div class="othr-place-list-title"><h5>D. P. Rao Hospital</h5></div>
																<div class="othr-place-list-subtitle"><span>2.47 Miles</span></div>
															</div>
														</div>
													</div>
												</div>
											</div>
											
											<div class="tab-pane fade" id="pills-grocery" role="tabpanel" aria-labelledby="pills-grocery-tab" tabindex="0">
												<div class="row g-4">
													<div class="col-xl-6 col-lg-6 col-md-6 col-12">
														<div class="othr-place-list">
															<div class="othr-place-list-icon"><i class="fa-solid fa-cart-shopping"></i></div>
															<div class="othr-place-list-caption">
																<div class="othr-place-list-title"><h5>Vijay Smart Bazar</h5></div>
																<div class="othr-place-list-subtitle"><span>7.70 Miles</span></div>
															</div>
														</div>
													</div>
													<div class="col-xl-6 col-lg-6 col-md-6 col-12">
														<div class="othr-place-list">
															<div class="othr-place-list-icon"><i class="fa-solid fa-cart-shopping"></i></div>
															<div class="othr-place-list-caption">
																<div class="othr-place-list-title"><h5>Relience Smart Bazar</h5></div>
																<div class="othr-place-list-subtitle"><span>2.47 Miles</span></div>
															</div>
														</div>
													</div>
													<div class="col-xl-6 col-lg-6 col-md-6 col-12">
														<div class="othr-place-list">
															<div class="othr-place-list-icon"><i class="fa-solid fa-cart-shopping"></i></div>
															<div class="othr-place-list-caption">
																<div class="othr-place-list-title"><h5>Qube Smart Mall</h5></div>
																<div class="othr-place-list-subtitle"><span>3.10 Miles</span></div>
															</div>
														</div>
													</div>
													<div class="col-xl-6 col-lg-6 col-md-6 col-12">
														<div class="othr-place-list">
															<div class="othr-place-list-icon"><i class="fa-solid fa-cart-shopping"></i></div>
															<div class="othr-place-list-caption">
																<div class="othr-place-list-title"><h5>Raja International Mall</h5></div>
																<div class="othr-place-list-subtitle"><span>2.10 Miles</span></div>
															</div>
														</div>
													</div>
												</div>
											</div>
											
											<div class="tab-pane fade" id="pills-food" role="tabpanel" aria-labelledby="pills-food-tab" tabindex="0">
												<div class="row g-4">
													<div class="col-xl-6 col-lg-6 col-md-6 col-12">
														<div class="othr-place-list">
															<div class="othr-place-list-icon"><i class="fa-solid fa-bowl-food"></i></div>
															<div class="othr-place-list-caption">
																<div class="othr-place-list-title"><h5>Smart Pizza Hub</h5></div>
																<div class="othr-place-list-subtitle"><span>3.47 Miles</span></div>
															</div>
														</div>
													</div>
													<div class="col-xl-6 col-lg-6 col-md-6 col-12">
														<div class="othr-place-list">
															<div class="othr-place-list-icon"><i class="fa-solid fa-bowl-food"></i></div>
															<div class="othr-place-list-caption">
																<div class="othr-place-list-title"><h5>Goli Burger Hutt</h5></div>
																<div class="othr-place-list-subtitle"><span>3.00 Miles</span></div>
															</div>
														</div>
													</div>
													<div class="col-xl-6 col-lg-6 col-md-6 col-12">
														<div class="othr-place-list">
															<div class="othr-place-list-icon"><i class="fa-solid fa-bowl-food"></i></div>
															<div class="othr-place-list-caption">
																<div class="othr-place-list-title"><h5>Shukoon Fast Foods</h5></div>
																<div class="othr-place-list-subtitle"><span>4.20 Miles</span></div>
															</div>
														</div>
													</div>
													<div class="col-xl-6 col-lg-6 col-md-6 col-12">
														<div class="othr-place-list">
															<div class="othr-place-list-icon"><i class="fa-solid fa-bowl-food"></i></div>
															<div class="othr-place-list-caption">
																<div class="othr-place-list-title"><h5>Ritika Fast Serve</h5></div>
																<div class="othr-place-list-subtitle"><span>3.47 Miles</span></div>
															</div>
														</div>
													</div>
												</div>
											</div>
											
											<div class="tab-pane fade" id="pills-park" role="tabpanel" aria-labelledby="pills-park-tab" tabindex="0">
												<div class="row g-4">
													<div class="col-xl-6 col-lg-6 col-md-6 col-12">
														<div class="othr-place-list">
															<div class="othr-place-list-icon"><i class="fa-solid fa-square-parking"></i></div>
															<div class="othr-place-list-caption">
																<div class="othr-place-list-title"><h5>Gandhi Park Smarak</h5></div>
																<div class="othr-place-list-subtitle"><span>3.47 Miles</span></div>
															</div>
														</div>
													</div>
													<div class="col-xl-6 col-lg-6 col-md-6 col-12">
														<div class="othr-place-list">
															<div class="othr-place-list-icon"><i class="fa-solid fa-square-parking"></i></div>
															<div class="othr-place-list-caption">
																<div class="othr-place-list-title"><h5>Kritika International Park</h5></div>
																<div class="othr-place-list-subtitle"><span>2.20 Miles</span></div>
															</div>
														</div>
													</div>
													<div class="col-xl-6 col-lg-6 col-md-6 col-12">
														<div class="othr-place-list">
															<div class="othr-place-list-icon"><i class="fa-solid fa-square-parking"></i></div>
															<div class="othr-place-list-caption">
																<div class="othr-place-list-title"><h5>Gyan Gayatri Park</h5></div>
																<div class="othr-place-list-subtitle"><span>4.50 Miles</span></div>
															</div>
														</div>
													</div>
													<div class="col-xl-6 col-lg-6 col-md-6 col-12">
														<div class="othr-place-list">
															<div class="othr-place-list-icon"><i class="fa-solid fa-square-parking"></i></div>
															<div class="othr-place-list-caption">
																<div class="othr-place-list-title"><h5>Huze Chidiya Ghar</h5></div>
																<div class="othr-place-list-subtitle"><span>1.47 Miles</span></div>
															</div>
														</div>
													</div>
												</div>
											</div>
											
											<div class="tab-pane fade" id="pills-fuel" role="tabpanel" aria-labelledby="pills-fuel-tab" tabindex="0">
												<div class="row g-4">
													<div class="col-xl-6 col-lg-6 col-md-6 col-12">
														<div class="othr-place-list">
															<div class="othr-place-list-icon"><i class="fa-solid fa-gas-pump"></i></div>
															<div class="othr-place-list-caption">
																<div class="othr-place-list-title"><h5>Indian Musterd Oil</h5></div>
																<div class="othr-place-list-subtitle"><span>4.40 Miles</span></div>
															</div>
														</div>
													</div>
													<div class="col-xl-6 col-lg-6 col-md-6 col-12">
														<div class="othr-place-list">
															<div class="othr-place-list-icon"><i class="fa-solid fa-gas-pump"></i></div>
															<div class="othr-place-list-caption">
																<div class="othr-place-list-title"><h5>Hindustan Petrolium</h5></div>
																<div class="othr-place-list-subtitle"><span>2.47 Miles</span></div>
															</div>
														</div>
													</div>
													<div class="col-xl-6 col-lg-6 col-md-6 col-12">
														<div class="othr-place-list">
															<div class="othr-place-list-icon"><i class="fa-solid fa-gas-pump"></i></div>
															<div class="othr-place-list-caption">
																<div class="othr-place-list-title"><h5>Hamara Petrol Pumb</h5></div>
																<div class="othr-place-list-subtitle"><span>5.00 Miles</span></div>
															</div>
														</div>
													</div>
												</div>
											</div>
											
											<div class="tab-pane fade" id="pills-hospital" role="tabpanel" aria-labelledby="pills-hospital-tab" tabindex="0">
												<div class="row g-4">
													<div class="col-xl-6 col-lg-6 col-md-6 col-12">
														<div class="othr-place-list">
															<div class="othr-place-list-icon"><i class="fa-solid fa-suitcase-medical"></i></div>
															<div class="othr-place-list-caption">
																<div class="othr-place-list-title"><h5>Shanti Om Hospital</h5></div>
																<div class="othr-place-list-subtitle"><span>1.17 Miles</span></div>
															</div>
														</div>
													</div>
													<div class="col-xl-6 col-lg-6 col-md-6 col-12">
														<div class="othr-place-list">
															<div class="othr-place-list-icon"><i class="fa-solid fa-suitcase-medical"></i></div>
															<div class="othr-place-list-caption">
																<div class="othr-place-list-title"><h5>D. P. Rao Hospital</h5></div>
																<div class="othr-place-list-subtitle"><span>2.47 Miles</span></div>
															</div>
														</div>
													</div>
													<div class="col-xl-6 col-lg-6 col-md-6 col-12">
														<div class="othr-place-list">
															<div class="othr-place-list-icon"><i class="fa-solid fa-suitcase-medical"></i></div>
															<div class="othr-place-list-caption">
																<div class="othr-place-list-title"><h5>R. D. Verman Hospital</h5></div>
																<div class="othr-place-list-subtitle"><span>2.30 Miles</span></div>
															</div>
														</div>
													</div>
												</div>
											</div>
											
											<div class="tab-pane fade" id="pills-services" role="tabpanel" aria-labelledby="pills-services-tab" tabindex="0">
												<div class="row g-4">
													<div class="col-xl-6 col-lg-6 col-md-6 col-12">
														<div class="othr-place-list">
															<div class="othr-place-list-icon"><i class="fa-solid fa-scissors"></i></div>
															<div class="othr-place-list-caption">
																<div class="othr-place-list-title"><h5>High hair Cutting Salon</h5></div>
																<div class="othr-place-list-subtitle"><span>2.10 Miles</span></div>
															</div>
														</div>
													</div>
												</div>
											</div>
											
											<div class="tab-pane fade" id="pills-shopping" role="tabpanel" aria-labelledby="pills-shopping-tab" tabindex="0">
												<div class="row g-4">
													<div class="col-xl-6 col-lg-6 col-md-6 col-12">
														<div class="othr-place-list">
															<div class="othr-place-list-icon"><i class="fa-solid fa-basket-shopping"></i></div>
															<div class="othr-place-list-caption">
																<div class="othr-place-list-title"><h5>Green Hubble Mall</h5></div>
																<div class="othr-place-list-subtitle"><span>2.50 Miles</span></div>
															</div>
														</div>
													</div>
													<div class="col-xl-6 col-lg-6 col-md-6 col-12">
														<div class="othr-place-list">
															<div class="othr-place-list-icon"><i class="fa-solid fa-basket-shopping"></i></div>
															<div class="othr-place-list-caption">
																<div class="othr-place-list-title"><h5>Zigar Smart Bazaar</h5></div>
																<div class="othr-place-list-subtitle"><span>1.50 Miles</span></div>
															</div>
														</div>
													</div>
												</div>
											</div>
										</div>

									</div>
								</div>
							</div> *@
							
							@* <!-- Submit Reviews -->
							<div class="vesh-detail-bloc style_2">
								<div class="vesh-detail-bloc_header">
									<h4 class="property_block_title no-arrow">Submit Review</h4>
								</div>
								<div class="panels">
									<div class="vesh-detail-bloc-body">
										<form class="simple-form">
											<div class="row">
												<div class="col-lg-6 col-md-6 col-sm-12">
													<div class="form-group">
														<label>Name</label>
														<input type="text" class="form-control" placeholder="Your Name">
													</div>
												</div>
												
												<div class="col-lg-6 col-md-6 col-sm-12">
													<div class="form-group">
														<label>Email</label>
														<input type="email" class="form-control" placeholder="Your eMail">
													</div>
												</div>
												
												<div class="col-lg-6 col-md-6 col-sm-12">
													<div class="form-group">
														<label>Phone No.</label>	
														<input type="text" class="form-control" placeholder="Your Contact">
													</div>
												</div>
												<div class="col-lg-6 col-md-6 col-sm-12">
													<div class="form-group">
														<label>Ratting</label>
														<select class="form-control">
															<option value="1">1 : Very Poor</option>
															<option value="2">2 : Poor</option>
															<option value="2">3 : Good</option>
															<option value="2">4 : Very Good</option>
															<option value="2">5 : Superb</option>
														</select>
													</div>
												</div>
												<div class="col-lg-12 col-md-12 col-sm-12">
													<div class="form-group">
														<label>Your Message</label>
														<textarea class="form-control ht-80" placeholder="Messages"></textarea>
													</div>
												</div>
												<div class="col-lg-12 col-md-12 col-sm-12">
													<div class="form-group">
														<button class="btn btn-theme" type="submit">Submit Review</button>
													</div>
												</div>
											</div>
										</form>
									</div>
								</div>
							</div> *@
							
						</div>
						<!-- property main detail -->
						
						
						<!-- Property Sidebar -->
						<div class="col-lg-4 col-md-12 col-sm-12">
							
							<!-- Like And Share -->
							<div class="vesh-detail-bloc border">
								<ul class="like_share_list">
									<li>
										<a href="JavaScript:Void(0);" data-bs-toggle="tooltip" data-bs-title="Copy Link" data-bs-placement="bottom" id="copyLink" class="btn btn-light-success"><i class="fa-solid fa-share-from-square me-2"></i>Share</a>
									</li>
									<li><a href="JavaScript:Void(0);" class="btn btn-light-danger" data-toggle="tooltip" data-original-title="Save"><i class="fa-solid fa-heart-circle-check me-2"></i>Save</a></li>
								</ul>
							</div>
							
							<div class="pg-side-groups">
								
								<div class="pg-side-block border">
									<div class="pg-side-block-head">
										<ul class="nav nav-pills" id="pills-tab" role="tablist">
											<li class="nav-item" role="presentation">
												<button class="nav-link active" id="pills-request-tab" data-bs-toggle="pill" data-bs-target="#pills-request" type="button" role="tab" aria-controls="pills-request" aria-selected="true">Request Info</button>
											</li>
											<li class="nav-item" role="presentation">
												<button class="nav-link" id="pills-schedule-tab" data-bs-toggle="pill" data-bs-target="#pills-schedule" type="button" role="tab" aria-controls="pills-schedule" aria-selected="false">Schedule A Tour</button>
											</li>
										</ul>
									</div>
									<div class="pg-side-block-body">
										<div class="tab-content" id="pills-tabContent">
											<div class="tab-pane fade show active" id="pills-request" role="tabpanel" aria-labelledby="pills-request-tab" tabindex="0">
												<div class="pg-side-block-head b-0">
													<div class="pg-side-left">
														<div class="pg-side-thumb"><img src="https://via.placeholder.com/650x650" class="img-fluid circle" alt=""></div>
													</div>
													<div class="pg-side-right">
														<div class="pg-side-right-caption">
															<h4>Ht. Mickle Hussy</h4>
															<span><i class="fa-solid fa-location-dot me-2"></i>Liverpool, UK</span>
														</div>
													</div>
												</div>
												<div class="pg-side-block-info pt-0 pb-4">
													<div class="sides-widget-body simple-form">
														<div class="form-group">
															<label class="font--bold">Name*</label>
															<input type="text" class="form-control" placeholder="Your Name">
														</div>
														<div class="form-group">
															<label>Email*</label>
															<input type="text" class="form-control" placeholder="Your Email">
														</div>
														<div class="form-group">
															<label>Phone No.*</label>
															<input type="text" class="form-control" placeholder="Your Phone">
														</div>
														<div class="form-group">
															<label>Description</label>
															<textarea class="form-control">I'm interested in this property.</textarea>
														</div>
														<button class="btn btn-theme font--medium full-width">Send Message</button>
													</div>	
												</div>
											</div>
											
											<div class="tab-pane fade" id="pills-schedule" role="tabpanel" aria-labelledby="pills-schedule-tab" tabindex="0">
												<div class="pg-side-block-info pt-0 pb-4">
													<div class="sides-widget-body simple-form mt-2">
														<div class="form-group">
															<input type="text" id="choosedate" data-dd-opt-custom-class="datedrp" class="form-control" placeholder="Choose Date" >
														</div>
														<div class="form-group">
															<select class="form-control">
																<option value="1">07:00 AM</option>
																<option value="2">08:00 AM</option>
																<option value="3">09:00 AM</option>
																<option value="4">10:00 AM</option>
																<option value="5">11:00 AM</option>
																<option value="6">12:00 PM</option>
																<option value="7">01:00 PM</option>
																<option value="8">02:00 PM</option>
																<option value="9">03:00 PM</option>
																<option value="10">04:00 PM</option>
																<option value="11">05:00 PM</option>
															</select>
														</div>

														<div class="form-group row">
															<div class="col-6">
																<input type="radio" class="btn-check" name="meeting" id="person-meeting" autocomplete="off" checked>
																<label class="full-width btn btn-outline-success" for="person-meeting"><i class="fa-regular fa-user me-2"></i>In Person</label>
															</div>
															<div class="col-6">
																<input type="radio" class="btn-check" name="meeting" id="video-meeting" autocomplete="off">
																<label class="full-width btn btn-outline-success" for="video-meeting"><i class="fa-solid fa-video me-2"></i>Video Chat</label>
															</div>
														</div>
													</div>
													<div class="sides-widget-body simple-form">
														<div class="form-group">
															<label class="font--bold">Name*</label>
															<input type="text" class="form-control" placeholder="Your Name">
														</div>
														<div class="form-group">
															<label>Email*</label>
															<input type="text" class="form-control" placeholder="Your Email">
														</div>
														<div class="form-group">
															<label>Phone No.*</label>
															<input type="text" class="form-control" placeholder="Your Phone">
														</div>
														<div class="form-group">
															<label>Description</label>
															<textarea class="form-control">I'm interested in this property.</textarea>
														</div>
														<button class="btn btn-theme font--medium full-width">Send Message</button>
													</div>												
												</div>
											</div>
										</div>
									</div>
								</div>
							
							</div>
						</div>
						
					</div>
				</div>
			</section>
			<!-- ============================ Property Detail End ================================== -->

@section Scripts{
	<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
	<script>
		console.log("script working?")
		$(document).ready(function () {
			var ctx = document.getElementById('mortgageChart').getContext('2d');
			var mortgageChart = new Chart(ctx, {
				type: 'pie',
				data: {
					labels: ['Principal', 'Interest'],
					datasets: [{
						label: 'Total Payable',
						data: [12, 19],
						backgroundColor: [
							'rgba(54, 162, 235, 0.4)',  // Custom color for Monthly Payment Variable
							'rgba(255, 99, 132, 0.4)', // Custom color for Monthly Payment Fixed
						],
						borderWidth: 2
					}]
				},
			});
		
			function validateInput(selector, errorSelector) {
				var value = $(selector).val();
				if (value) {
					var sanitizedValue = value.replace(/,/g, ''); // Remove commas
					if (!$.isNumeric(sanitizedValue) || parseFloat(sanitizedValue) < 0) {
						$(selector).addClass("is-invalid");
						$(errorSelector).text("Please enter a valid number.");
						return false;
					} else {
						$(errorSelector).text("");
						$(selector).removeClass("is-invalid");
						return true;
					}
				} else {
					$(errorSelector).text("This field is required.");
					return false;
				}
			}

			function calculateMonthlyPayment(principal, annualInterestRate, loanTermYears) {
				var monthlyInterestRate = annualInterestRate / 100 / 12;
				var numberOfPayments = loanTermYears * 12;
            
				var monthlyPayment = principal * monthlyInterestRate / (1 - Math.pow(1 + monthlyInterestRate, -numberOfPayments));
				return monthlyPayment;
			}

			function calculateResults() {
				var isValid = true;

				isValid &= validateInput("#property-value", "#property-value-error");
				isValid &= validateInput("#down-payment", "#down-payment-error");
				isValid &= validateInput("#mortgage-term", "#mortgage-term-error");
				isValid &= validateInput("#mortgage-fee", "#mortgage-fee-error");
				isValid &= validateInput("#base-interest-rate", "#base-interest-rate-error");
				isValid &= validateInput("#loan-interest-rate", "#loan-interest-rate-error");

				if (!isValid) {
					return;
				}

				var propertyValue = parseFloat($("#property-value").val().replace(/,/g, ''));
				var downPayment = parseFloat($("#down-payment").val().replace(/,/g, ''));
				var mortgageTerm = parseInt($("#mortgage-term").val());
				var mortgageFee = parseFloat($("#mortgage-fee").val().replace(/,/g, ''));
				var baseInterestRate = parseFloat($("#base-interest-rate").val());
				var loanInterestRate = parseFloat($("#loan-interest-rate").val());

				var monthlyPayment = 0;
				var totalPayment = 0;
				var totalInterest = 0;

				var loanAmount = propertyValue - downPayment;
				if (loanAmount > 0) {
					monthlyPayment = calculateMonthlyPayment(loanAmount, baseInterestRate + loanInterestRate, mortgageTerm) + mortgageFee / (12 * mortgageTerm);
					totalPayment = monthlyPayment * mortgageTerm * 12;
					totalInterest = totalPayment - loanAmount;
				}

				$("#monthly-payment").text(monthlyPayment > 0 ? monthlyPayment.toFixed(2) : "N/A");
				$("#total-amount-financed").text(loanAmount > 0 ? loanAmount.toFixed(2) : "N/A");
				$("#total-interest-payable").text(totalInterest > 0 ? totalInterest.toFixed(2) : "N/A");
				$("#total-payable").text(totalPayment > 0 ? totalPayment.toFixed(2) : "N/A");

				mortgageChart.data.datasets[0].data[0] = loanAmount > 0 ? loanAmount.toFixed(2) : 0;
				mortgageChart.data.datasets[0].data[1] = totalInterest > 0 ? totalInterest.toFixed(2) : 0;
				mortgageChart.update();
			}

			$("input").on("input", function () {
				calculateResults();
			});

			calculateResults(); // initial calculation
		});

		// document.getElementById('copyLink').addEventListener('click', function () {
		// 	// Create a temporary input element
		// 	const tempInput = document.createElement('input');
		// 	// Append it to the body
		// 	document.body.appendChild(tempInput);
		// 	// Set its value to the current URL
		// 	tempInput.value = window.location.href;
		// 	// Select the value
		// 	tempInput.select();
		// 	// Copy the text inside the input
		// 	document.execCommand('copy');
		// 	// Remove the temporary input
		// 	document.body.removeChild(tempInput);

		// 	// Optional: Alert the user that the URL has been copied
		// 	alert('URL copied to clipboard!');
		// });

		document.getElementById('copyLink').addEventListener('click', async function () {
			try {
				await navigator.clipboard.writeText(window.location.href);
				document.getElementById('copyMessage').style.display = 'inline'; // Show the message
				setTimeout(() => { document.getElementById('copyMessage').style.display = 'none'; }, 3000); // Hide after 3 seconds
			} catch (err) {
				console.error('Failed to copy: ', err);
			}
		});

		const tooltipTriggerList = document.querySelectorAll('[data-bs-toggle="tooltip"]')
		const tooltipList = [...tooltipTriggerList].map(tooltipTriggerEl => new bootstrap.Tooltip(tooltipTriggerEl))

		// $('#copyLink').on('click', function (event) {
		// 	event.preventDefault(); // Prevent the default action
		// 	// Change the tooltip title
		// 	$(this).attr('data-bs-title', 'Copied!').tooltip('dispose').tooltip('show');
		// 	var tooltip = document.getElementById('tooltip');
		// 	if (tooltip) {
		// 		// Close the tooltip
		// 		tooltip.style.display = 'none';

		// 		// Change the tooltip title after 3 seconds
		// 		setTimeout(function () {
		// 			tooltip.textContent = 'Copy Link';
		// 		}, 3000);
		// 	}
		// });

		$(document).ready(function () {
			// Initialize the tooltip
			$('[data-bs-toggle="tooltip"]').tooltip();

			// Add click event listener to the anchor
			$('#copyLink').on('click', function (event) {
				event.preventDefault(); // Prevent the default action

				var $this = $(this);

				// Change the tooltip title to "Copied!" and show it
				$this.attr('data-bs-title', 'Copied!').tooltip('dispose').tooltip('show');

				// Hide the tooltip quickly
				setTimeout(function () {
					$this.attr('data-bs-title', 'Copy Link!').tooltip('dispose').tooltip('show');
				}, 3000);
			});
		});
	</script>
}
